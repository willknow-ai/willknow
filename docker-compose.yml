services:
  backend:
    image: willknow-backend
    build:
      context: ./backend
    ports:
      - "3000:3000"
    volumes:
      # 只挂载配置文件，避免覆盖整个 config 目录（index.js 等源码需保留）
      - ./data/config.json:/app/src/config/config.json
    restart: unless-stopped

  frontend:
    image: willknow-frontend
    build:
      context: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    restart: unless-stopped
